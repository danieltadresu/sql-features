-- DDL for POSTULANTE
create table POSTULANTE (
    RUN_POSTULANTE     NUMBER(9)    NOT NULL,
    DV_RUN             VARCHAR2(1)  NOT NULL,
    PRIMER_NOMBRE      VARCHAR2(45) NOT NULL,
    SEGUNDO_NOMBRE     VARCHAR2(45) NULL,
    PRIMER_APELLIDO    VARCHAR2(50) NOT NULL,
    SEGUNDO_APELLIDO   VARCHAR2(50) NOT NULL,
    FECHA_NACIMIENTO   DATE         NOT NULL,
    TELEFONO_TRABAJO   NUMBER(9)    NULL,
    TELEFONO_MOVIL     NUMBER(9)    NULL,
    EMAIL              VARCHAR2(45) NOT NULL,
    ID_COMUNA          NUMBER(3)    NOT NULL,
    ID_PROVINCIA       NUMBER(3)    NOT NULL,
    ID_REGION          NUMBER(3)    NOT NULL           
);

ALTER TABLE POSTULANTE
ADD CONSTRAINT PK_POSTULANTE
PRIMARY KEY(RUN_POSTULANTE);
-- END DDL for POSTULANTE

--DDL for COMUNA
CREATE TABLE COMUNA (
    ID_COMUNA          NUMBER(3)    NOT NULL,
    NOMBRE_COMUNA      VARCHAR2(50) NOT NULL,
    ID_PROVINCIA       NUMBER(3)    NOT NULL
);

ALTER TABLE COMUNA
ADD CONSTRAINT PK_COMUNA
PRIMARY KEY(ID_COMUNA);

ALTER TABLE POSTULANTE
ADD CONSTRAINT FK_COMUNA_POSTULANTE
FOREIGN KEY(ID_COMUNA)
REFERENCES COMUNA(ID_COMUNA);
--END DDL for COMUNA

--DDL for PROVINCIA
CREATE TABLE PROVINCIA (
    ID_PROVINCIA      NUMBER(3)     NOT NULL, 
    NOMBRE_PROVINCIA  VARCHAR2(50)  NOT NULL,
    ID_REGION         NUMBER(3)     NOT NULL
);

ALTER TABLE PROVINCIA
ADD CONSTRAINT PK_PROVINCIA
PRIMARY KEY(ID_PROVINCIA);

ALTER TABLE COMUNA
ADD CONSTRAINT FK_PROVINCIA_COMUNA
FOREIGN KEY(ID_PROVINCIA)
REFERENCES PROVINCIA(ID_PROVINCIA);
--END DDL for PROVINCIA.

--DDL for REGION
CREATE TABLE REGION (
    ID_REGION        NUMBER(3) NOT NULL,
    NOMBRE_REGION    VARCHAR2(50) NOT NULL
);

ALTER TABLE REGION
ADD CONSTRAINT PK_REGION
PRIMARY KEY(ID_REGION);

ALTER TABLE PROVINCIA
ADD CONSTRAINT FK_PROVINCIA_REGION
FOREIGN KEY(ID_PROVINCIA)
REFERENCES REGION(ID_REGION);
--END DDL for REGION.


-- ADD REFERENCES TO PROVINCIA AND REGION
ALTER TABLE POSTULANTE
ADD CONSTRAINT FK_PROVINCIA_POSTULANTE
FOREIGN KEY(ID_PROVINCIA)
REFERENCES PROVINCIA(ID_PROVINCIA);

ALTER TABLE POSTULANTE
ADD CONSTRAINT FK_REGION_POSTULANTE
FOREIGN KEY(ID_REGION)
REFERENCES REGION(ID_REGION);
-- END ADD REFERENCES TO PROVINCIA AND REGION.

-- DDL for CARGA_FAMILIAR
create table CARGA_FAMILIAR (
    RUN_CARGA          NUMBER(9)     NOT NULL,
    DV_RUN             VARCHAR2(1)   NOT NULL,
    PRIMER_NOMBRE      VARCHAR2(45)  NOT NULL,
    SEGUNDO_NOMBRE     VARCHAR2(45)  NULL,
    PRIMER_APELLIDO    VARCHAR2(50)  NOT NULL,
    SEGUNDO_APELLIDO   VARCHAR2(50)  NOT NULL,
    RUN_POSTULANTE     NUMBER(9)     NOT NULL
);

ALTER TABLE CARGA_FAMILIAR
ADD CONSTRAINT PK_CARGA_FAMILIAR
PRIMARY KEY(RUN_CARGA);

ALTER TABLE CARGA_FAMILIAR
ADD CONSTRAINT FK_POSTULANTE_CARGA
FOREIGN KEY(RUN_POSTULANTE)
REFERENCES POSTULANTE(RUN_POSTULANTE);
-- end DDL for CARGA_FAMILIAR
